# PC 서버 + 안드로이드 가이드 실행 가이드

이 문서는 **PC를 서버로 사용**하고, 가이드와 관광객이 **안드로이드** 폰으로 접속하는 환경을 위한 설정 방법을 설명합니다.

## 1. 준비물 및 환경 구성

*   **서버용 PC**: Python이 설치된 Windows/Mac PC.
*   **공유기 (Wi-Fi)**: PC와 스마트폰들이 모두 **동일한 와이파이**에 연결되어 있어야 합니다.
*   **가이드 폰**: 안드로이드 폰 (Chrome 브라우저 필수).
*   **관광객 폰**: 안드로이드 폰 (Chrome 브라우저 권장).

## 2. PC 서버 준비 (최초 1회)

### 2.1 Python 설치
PC에 Python이 없다면 [Python 공식 홈페이지](https://www.python.org/downloads/)에서 설치하세요. (설치 시 "Add Python to PATH" 체크 필수)

### 2.2 소스 코드 준비
1.  프로젝트 폴더를 다운로드/압축해제 합니다.
2.  폴더 내에서 터미널(CMD 또는 PowerShell)을 엽니다.

### 2.3 라이브러리 설치
터미널에 다음 명령어를 입력하여 필요한 프로그램을 설치합니다.

```bash
pip install -r requirements.txt
```

## 3. 서버 실행

### 3.1 IP 주소 확인
PC의 터미널에서 `ipconfig` (Mac은 `ifconfig`)를 입력하여 **IPv4 주소**를 확인합니다.
(예: `192.168.0.15` 와 같은 형식)

### 3. 서버 실행 (HTTPS 보안 모드)
`mobile-guide-system` 폴더 안에서 아래 명령어를 실행합니다:

```bash
python server.py
```

- **최초 실행 시**: 자동으로 `cert.pem`, `key.pem` (보안 인증서) 파일이 생성됩니다.
- **성공 메시지**:
  ```
  🚀 Mobile Guide Server Running (HTTPS Mode)
  💻 Local Access: https://localhost:5000
  📱 Mobile Access: https://192.168.x.x:5000
  ```

---

## 2. 핸드폰 접속 방법 (중요: HTTPS 경고창)

서버가 **보안 모드(HTTPS)**로 작동하므로, 접속할 때 **"안전하지 않음"** 경고가 뜹니다. 이는 우리가 직접 만든 인증서를 사용하기 때문이며, **정상적인 상황**입니다.

### 1) 가이드 폰 (아이폰, 안드로이드 모두 가능!)
가이드(방송자)는 반드시 **마이크 권한**이 필요하므로 아래 절차를 꼭 따라주세요.

1.  **크롬(Chrome)** 또는 **사파리(Safari)** 브라우저를 웁니다.
2.  주소창에 **`https://`** 를 포함하여 서버 주소를 입력합니다.
    *   예: `https://192.168.0.10:5000` (IP주소는 PC 화면 확인)
3.  **🚨 보안 경고창이 뜹니다.** 당황하지 마세요!
    *   **Chrome (안드로이드)**: [고급] (또는 세부정보) -> **[...로 이동 (안전하지 않음)]** 클릭
    *   **Safari (아이폰)**: [세부사항 보기] -> **[이 웹사이트 방문]** -> [웹사이트 방문] 클릭
4.  **역할 선택**: "I am Guide"를 선택합니다.
5.  **방송 시작**: "Start Broadcast"를 누르면 마이크 권한 요청이 뜨고, **[허용]**을 누르면 방송이 시작됩니다.

> **💡 더 이상 `chrome://flags` 설정이 필요 없습니다!**
> HTTPS 모드에서는 복잡한 설정 없이도 마이크 권한이 바로 활성화됩니다.

## 5. 관광객 접속

관광객은 별도의 보안 설정이 필요 없습니다.

1.  와이파이를 가이드/서버와 같은 것으로 연결합니다.
2.  크롬 브라우저로 `http://192.168.0.XX:5000` 에 접속합니다.
3.  **"관광객 (Tourist)"** 버튼을 누릅니다.
4.  언어 선택 후 "듣기 시작" 버튼이 나오면 클릭합니다. (자동 재생 정책 때문)

## 6. 문제 해결

*   **접속이 안 될 때**:
    *   PC의 **방화벽**이 차단하고 있을 수 있습니다. 제어판 > 방화벽 설정에서 Python의 통신을 허용하거나, 테스트를 위해 잠시 방화벽을 끕니다.
    *   PC와 폰이 같은 와이파이인지 다시 확인하세요.
*   **마이크가 안 될 때**:
    *   4.1단계의 `chrome://flags` 설정 주소가 정확한지 확인하세요. (http:// 포함, :5000 포함)
