# 📋 모바일 가이드 시스템 개발 논의 (Discussion Log)

**날짜**: 2026-01-09
**주제**: 테스트 방법, 배포 전략, 하드웨어 추천 및 설치 자동화

## 1. 테스트 방법 (Testing Strategy)
현재 개발 단계에서 모바일 환경을 테스트하는 가장 효율적인 방법입니다.

*   **로컬 네트워크 테스트 (Local Network)**
    *   **구성**: PC(서버) + 핸드폰(관광객)
    *   **방법**: 같은 Wi-Fi에 연결 후 `http://PC_IP주소:5000` 접속
    *   **제약사항**: 모바일 브라우저는 보안상의 이유로 **HTTP 사이트에서 마이크 권한을 차단**합니다. 따라서 핸드폰으로 '가이드(방송)' 기능을 테스트하기 어렵습니다. (관광객 '듣기'는 가능)
    *   **해결책**: 가이드는 PC(Localhost)에서, 관광객은 핸드폰에서 테스트.

*   **Replit 테스트 (Cloud)**
    *   **장점**: **HTTPS(보안 연결)**를 자동으로 제공하여 핸드폰에서도 **마이크 사용이 가능**합니다.
    *   **활용**: 아이폰/안드로이드 상관없이 가이드 방송 기능 테스트 가능.
    *   **단점**: 인터넷 연결 필수. (실제 오프라인 투어 현장용은 아님)

## 2. 배포 및 구동 방식 (Deployment)
최종적으로 `server.py`가 어디서 돌아가느냐에 대한 논의입니다.

*   **Scenario A: 클라우드 서버 (Web)**
    *   AWS, Replit 서버 등에서 구동.
    *   전 세계 어디서나 접속 가능하나 인터넷 필수.
*   **Scenario B: 로컬/모바일 서버 (Termux) - [채택 방향]**
    *   가이드의 **안드로이드 폰**이나 **태블릿** 내에서 서버를 직접 구동.
    *   휴대용 공유기(AP)와 함께 사용하여 **인터넷 없는 오지에서도 사용 가능**.
    *   빠른 응답 속도(Low Latency).

## 3. Termux 서버용 장비 추천 (Hardware)
가이드 폰으로 서버를 돌릴 때 안정적인 성능(60명 접속, 오디오 인코딩)을 위한 추천 사양입니다.

*   **핵심 요건**: 스냅드래곤 865 이상, RAM 8GB 권장, 발열 제어 우수.
*   **추천 기기 (중고 가성비)**:
    1.  **갤럭시 S20 FE (Fan Edition)**: 명기, 발열 제어 우수.
    2.  **LG V50s / V60**: 듀얼 스크린, 튼튼함, 저렴한 가격.
*   **설정 꿀팁**:
    *   `비행기 모드` + `Wi-Fi` 사용 (전화 수신 방지).
    *   Termux 앱 배터리 최적화 **제외/끄기** (백그라운드 실행 유지).

## 4. 향후 계획 (Action Plan)
설치 복잡도를 낮추기 위한 자동화 작업을 진행합니다.

*   **Termux 원터치 설치 스크립트 (`setup_termux.sh`) 제작**
    *   명령어 한 줄 복사-붙여넣기로 설치 완료.
    *   패키지 업데이트, 파이썬 설치, 의존성 설치, 실행 아이콘 생성까지 자동화.

## 5. Q&A (추가 논의)
*   **Q: 핸드폰에 명령어를 직접 일일이(타이핑해서) 쳐야 하나요?**
    *   **A: 아니요.** `setup_termux.sh`라는 "자동 설치 스크립트"를 이용할 것입니다.
    *   사용자는 카카오톡 등으로 전달받은 **명령어 한 줄**만 복사해서 붙여넣기하면, 나머지는 자동으로 진행됩니다. (패키지 설치, 코드 다운로드, 설정 등 포함)

## 6. 안드로이드 STT '띠링' 비프음 제거 방안 (STT Beep Issue)
"가이드 폰에서 대기 중에 자꾸 '띠링' 소리가 나요."

*   **원인 (The Cause)**:
    *   안드로이드(Chrome/Google) 정책상 **음성 인식(STT)이 시작되고 끝날 때마다** 사생활 보호를 위해 강제로 시스템 비프음을 재생합니다. 
    *   현재 구조(Web Speech API)에서는 웹사이트 코드(`app.js`)로 이 소리를 끄는 것이 **불가능**합니다. (OS 레벨 강제 사항)

*   **현재 해결 방안 (Short-term Solution)**:
    1.  **[Recorder Mode] 적극 활용**: 
        *   방금 수정한 **[Recorder Mode]**를 사용하세요.
        *   Recorder 모드는 '녹음기' 방식이라 **'띠링' 소리가 절대 나지 않습니다.**
        *   단순 음성 방송만 필요할 때는 이 모드가 정답입니다.
    2.  **안드로이드 설정 변경 (기기별 상이)**:
        *   `설정 > 접근성 > TalkBack > 설정 > 소리 및 진동 > 효과음` 끄기.
        *   또는 `설정 > 앱 > Google > 설정 > 음성` 메뉴 확인.
        *   (하지만 최신 안드로이드는 이 설정으로도 비프음이 안 꺼지는 경우가 많습니다.)

*   **근본적인 해결 방안 (Long-term Solution - 아키텍처 변경)**:
    *   만약 "STT(자막/번역)도 쓰면서 소리는 없애고 싶다"면, 현재의 **클라이언트(폰) STT 방식**을 버리고 **서버 STT 방식**으로 변경해야 합니다.
    *   **클라이언트 STT (현재)**: 폰이 직접 듣고 텍스트로 변환 (무료, 끊길 때마다 소리 남).
    *   **서버 STT (변경안)**: 폰은 소리만 서버로 전송(소리 안 남) -> 서버가 OpenAI Whisper나 Google Cloud API로 변환.
    *   **단점**: 서버 비용 발생 (API 사용료) 및 고성능 서버 필요.
